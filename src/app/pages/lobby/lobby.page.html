<ion-content>
  <h1 class="text-center">Code d'invitation : {{ partyId }}</h1>
  <h2 class="text-center">Nombre de manches: {{ numberOfRounds }}</h2>
  <ion-card>
      
    <ion-card-header>
      <ion-card-title class="ion-text-center">Participants</ion-card-title>
    </ion-card-header>
    <ion-card-content *ngFor="let slot of playerSlots; let i = index">
      <ion-item
        class="itemForPlayers"
        color="none"
        lines="none"
        *ngIf="slot"
        [ngClass]="getStatusColorClass(slot.isReady)"
      >
        <ion-thumbnail slot="start">
          <ion-img
            [src]="slot.profilPicture"
            style="border-radius: 10px"
          ></ion-img>
        </ion-thumbnail>
        <ion-label class="ion-text-center">
          {{ slot.username }} - {{ slot.isReady ? 'Prêt' : 'Pas prêt' }}
        </ion-label>
      </ion-item>
      <ion-item *ngIf="!slot" class="itemForPlayers" color="light" lines="none">
        <ion-thumbnail slot="start">
          <ion-img
            src="../../../assets/nullMusic.png"
            style="border-radius: 10px"
          ></ion-img>
        </ion-thumbnail>
        <ion-label class="ion-text-center"> En attente de joueur</ion-label>
      </ion-item>
    </ion-card-content>
    @if (tailleJoueursErreur) {
    <ion-text color="danger" *ngIf="tailleJoueursErreur" id="error">
      <p>Il faut au minimum 3 joueurs</p>
    </ion-text>
    }
  </ion-card>
  
  <div class="button-container ion-text-center">
    
    <ion-grid>
      <ion-button *ngIf="isHost" (click)="openPartySettings()" expand="block">
        Paramètres de la partie
      </ion-button>
      <ion-row>
        <ion-col size="6">
          <ion-button
            expand="block"
            *ngIf="!isReady"
            (click)="showConfirmReadyModal()"
          >
            Je suis prêt
          </ion-button>
          <ion-button
            expand="block"
            *ngIf="isHost && isReady"
            (click)="launchParty()"
            [disabled]="showStartGameButton"
          >
            Lancer la Partie
          </ion-button>
        </ion-col>

        @if (!isHost && !isReady) {
        <ion-col size="6">
          <ion-button expand="block" (click)="leaveParty()" color="danger">
            Quitter la Partie
          </ion-button>
        </ion-col>
        }@else if (isHost) {
        <ion-col size="6">
          <ion-button expand="block" (click)="leaveParty()" color="danger">
            Quitter la Partie
          </ion-button>
        </ion-col>
        }
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <ion-button
            expand="block"
            (click)="leaveParty()"
            color="danger"
            *ngIf="!isHost && isReady"
          >
            Quitter la Partie
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
